Coursera House
==============



Установка
---------

Установите pipenv https://docs.pipenv.org/

.. code-block:: bash

    $ pip install pipenv


Установите зависимости проекта, включая зависимости для разработки

.. code-block:: bash

    $ pipenv install --dev

Активируйте virtualenv проекта

.. code-block:: bash

    $ pipenv shell

Запустите миграции

.. code-block:: bash

    $ python manage.py migrate




Запуск
------

Зайдя на сайт (https://smarthome.webpython.graders.eldf.ru/) и зарегистрировавшись, вы получите уникальный ключ (KEY).
Этот ключ нужно записать как переменную окружения (export SMART_HOME_ACCESS_TOKEN="ваш ключ") в bashrc,
как и такие параметры: EMAIL_HOST, EMAIL_PORT, EMAIL_USE_TLS/EMAIL_USE_SSL для успешной работы send_mail в случае протечки.

На главной странице сервиса будет расположена панель управления вашим умным домом.

Для запуска периодического опроса состояния дома, используется celery.

Она запускается как celery -A coursera_house.celery worker -l info -B

Celery использует Redis как брокер, инструкция по установке Redis: https://redis.io/topics/quickstart


Описание
------------

Это сервер управления умным домом, имеющий web-интерфейс для настройки и ручного управления, который будет производить периодический опрос датчиков
и осуществлять автоматическую реакцию в случае определенных ситуаций, используя API контроллера умного дома.
Авторы курса сделали виртуальные контроллер, датчики и устройства, которыми управляет этот сервер.

Тестирование
------------


Для запуска тестов выполните команду

.. code-block:: bash

    $ py.test tests
